<!DOCTYPE html>
<html>
<head>
    <title>Game Data Editor</title>
    <script>
        const apiURL = 'https://u8der8ty5g.execute-api.us-east-1.amazonaws.com/dev/ReadWriteDDB';
        const tableName = 'UpdateLive'; // Add your DynamoDB table name here

        async function loadData() {
    try {
        const response = await fetch(`${apiURL}?TableName=${tableName}&OrderBy=updateId&Descending=true`);
        const data = await response.json();
        console.log(data);

        if (data.Items && Array.isArray(data.Items) && data.Items.length > 0) {
            const item = data.Items[0];
            document.getElementById('promptInput').value = item.prompt || '';
            document.getElementById('audienceMessageInput').value = item.audienceMessage || '';
            document.getElementById('spriteLinkInput').value = item.spriteLink || '';
            document.getElementById('bgLinkInput').value = item.bgLink || ''; // New field
        } else {
            console.log('No items returned from the database.');
            // Clear all fields
            document.getElementById('promptInput').value = '';
            document.getElementById('audienceMessageInput').value = '';
            document.getElementById('spriteLinkInput').value = '';
            document.getElementById('bgLinkInput').value = ''; // New field
        }
    } catch (error) {
        console.error('Error loading data:', error);
    }
}

async function updateData() {
    try {
        const updateId = `update-${new Date().toISOString()}`;
        const newData = {
            TableName: 'UpdateLive',
            Item: {
                updateId: updateId,
                prompt: document.getElementById('promptInput').value,
                audienceMessage: document.getElementById('audienceMessageInput').value,
                spriteLink: document.getElementById('spriteLinkInput').value,
                bgLink: document.getElementById('bgLinkInput').value // New field
            }
        };

        await fetch(apiURL, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(newData)
        });

        alert('Data updated successfully');
        loadData(); // Reload data after update
    } catch (error) {
        console.error('Error updating data:', error);
    }
}

       document.addEventListener('DOMContentLoaded', (event) => {
        loadData();
    });
    </script>
</head>
<body>
    <h1>Game Data Editor</h1>
    <p>version 1.6</p>
    <div>
        <label for="promptInput">Prompt:</label><br>
        <input type="text" id="promptInput" name="prompt"><br>

        <label for="audienceMessageInput">Audience Message:</label><br>
        <input type="text" id="audienceMessageInput" name="audienceMessage"><br>

        <label for="spriteLinkInput">Sprite Link:</label><br>
        <input type="text" id="spriteLinkInput" name="spriteLink"><br><br>
        <label for="bgLinkInput">Background Link:</label><br>
        <input type="text" id="bgLinkInput" name="bgLink"><br><br>

        <button onclick="updateData()">Update Game Data</button>
    </div>
</body>
</html>
