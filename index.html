<!DOCTYPE html>
<html>
<head>
    <title>Game Data Editor</title>
    <script>
        const apiURL = 'https://u8der8ty5g.execute-api.us-east-1.amazonaws.com/dev/ReadWriteDDB';
        const tableName = 'UpdateLive'; // Add your DynamoDB table name here

        async function loadData() {
            try {
                const response = await fetch(`${apiURL}?TableName=${tableName}`); // Include the table name in the query string
                const data = await response.json();

                // Assuming data is an array of items and you want the first one
                const item = data[0]; 
                document.getElementById('promptInput').value = item.prompt || '';
                document.getElementById('audienceMessageInput').value = item.audienceMessage || '';
                document.getElementById('spriteLinkInput').value = item.spriteLink || '';
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        async function updateData() {
            try {
                const newData = {
                    TableName: tableName, // Include the table name in the data object
                    Item: { // Wrap the data fields under an Item object
                        prompt: document.getElementById('promptInput').value,
                        audienceMessage: document.getElementById('audienceMessageInput').value,
                        spriteLink: document.getElementById('spriteLinkInput').value
                    }
                };

                await fetch(apiURL, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(newData)
                });

                alert('Data updated successfully');
                loadData(); // Reload data after update
            } catch (error) {
                console.error('Error updating data:', error);
            }
        }

        window.onload = loadData;
    </script>
</head>
<body>
    <h1>Game Data Editor</h1>
    <div>
        <label for="promptInput">Prompt:</label><br>
        <input type="text" id="promptInput" name="prompt"><br>

        <label for="audienceMessageInput">Audience Message:</label><br>
        <input type="text" id="audienceMessageInput" name="audienceMessage"><br>

        <label for="spriteLinkInput">Sprite Link:</label><br>
        <input type="text" id="spriteLinkInput" name="spriteLink"><br><br>

        <button onclick="updateData()">Update Game Data</button>
    </div>
</body>
</html>
